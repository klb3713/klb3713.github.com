
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Changes to the Docutils latex2e writer since version 0.5 &mdash; klb3713&#39;s notebook</title>
    
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="klb3713&#39;s notebook" href="../../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="../../index.html">klb3713&#39;s notebook</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="changes-to-the-docutils-latex2e-writer-since-version-0-5">
<h1><a class="toc-backref" href="#id3">Changes to the Docutils latex2e writer since version 0.5</a><a class="headerlink" href="#changes-to-the-docutils-latex2e-writer-since-version-0-5" title="Permalink to this headline">¶</a></h1>
<div class="section" id="a-backwards-compatibility-style-sheet">
<h2><a class="toc-backref" href="#id4">A backwards compatibility style sheet</a><a class="headerlink" href="#a-backwards-compatibility-style-sheet" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body"><p class="first">Guenter Milde</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Contact:</th><td class="field-body"><p class="first"><a class="reference external" href="mailto:docutils-develop&#37;&#52;&#48;lists&#46;sourceforge&#46;net">docutils-develop<span>&#64;</span>lists<span>&#46;</span>sourceforge<span>&#46;</span>net</a></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Revision:</th><td class="field-body"><p class="first">$Revision: 7302 $</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Date:</th><td class="field-body"><p class="first">$Date: 2012-01-03 20:23:53 +0100 (Di, 03. Jan 2012) $</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Copyright:</th><td class="field-body"><p class="first">© 2009 Günter Milde,</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">License:</th><td class="field-body"><p class="first">Released under the terms of the <a class="reference external" href="http://www.spdx.org/licenses/BSD-2-Clause">2-Clause BSD license</a>, in short:</p>
<p>Copying and distribution of this file, with or without modification,
are permitted in any medium without royalty provided the copyright
notice and this notice are preserved.
This file is offered as-is, without any warranty.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Abstract:</th><td class="field-body"><p class="first last">This file documents changes and provides a style for best
possible compatibility to the behaviour of the <cite>latex2e</cite>
writer of Doctutils release 0.5.</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><pre>\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{docutils-05-compat}
[2009/03/26 v0.1 compatibility with rst2latex from Docutils 0.5]</pre>
</div>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#changes-to-the-docutils-latex2e-writer-since-version-0-5" id="id3">Changes to the Docutils latex2e writer since version 0.5</a><ul>
<li><a class="reference internal" href="#a-backwards-compatibility-style-sheet" id="id4">A backwards compatibility style sheet</a><ul>
<li><a class="reference internal" href="#usage" id="id5">Usage</a></li>
<li><a class="reference internal" href="#changes-since-0-5" id="id6">Changes since 0.5</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="usage">
<h3><a class="toc-backref" href="#id5">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>To get an (almost) identic look for your old documents,
place <tt class="docutils literal"><span class="pre">docutils-05-compat.sty</span></tt> in the TEXINPUT path (e.g.
the current work directory) and pass the
<tt class="docutils literal"><span class="pre">--stylesheet=docutils-05-compat</span></tt> option to <tt class="docutils literal"><span class="pre">rst2latex.py</span></tt>.</li>
<li>To use your custom stylesheets without change, add them to the
compatibility style, e.g.
<tt class="docutils literal"><span class="pre">--stylesheet=&quot;docutils-05-compat,mystyle.tex</span></tt>.</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">As the changes include bug fixes that are partly reverted by this
style, it is recommended to adapt the stylesheets to the new version or
copy just the relevant parts of this style into them.</p>
</div>
</div>
<div class="section" id="changes-since-0-5">
<h3><a class="toc-backref" href="#id6">Changes since 0.5</a><a class="headerlink" href="#changes-since-0-5" title="Permalink to this headline">¶</a></h3>
<div class="section" id="bugfixes">
<h4>Bugfixes<a class="headerlink" href="#bugfixes" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first">Newlines around comments, targets and references prevent run-together
paragraphs.</p>
<ul class="simple">
<li>An image directive with hyperlink reference or target did not start a
new paragraph (e.g. the first two image examples in
standalone_rst_latex.tex).</li>
<li>Paragraphs were not separated if there was a (hyper) target definition
inbetween.</li>
<li>Paragraphs did run together, if separated by a comment-paragraph in the
rst source.</li>
</ul>
</li>
<li><p class="first">Fixed missing and spurious internal links/targets.
Internal links now take you to the correct place.</p>
</li>
<li><p class="first">Verbose and linked system messages.</p>
</li>
<li><p class="first"><a class="reference internal" href="#figure-and-image-alignment">Figure and image alignment</a> now conforms to the rst definition.</p>
</li>
<li><p class="first">Put <a class="reference external" href="../ref/rst/directives.html#document-header-footer">header and footer directive</a> content in DUheader respective
DUfooter macros (ignored by the default style/template).</p>
<p>(They were put inside hard-coded markup at the top/bottom of the document
without an option to get them on every page.)</p>
</li>
</ul>
<ul>
<li><p class="first">Render doctest blocks as literal blocks (fixes bug [1586058] doctest block
nested in admonition). I.e.</p>
<ul class="simple">
<li>indent doctest blocks by nesting in a quote environment. This is also
the rendering by the HTML writer (html4css2.css).</li>
<li>apply the <tt class="docutils literal"><span class="pre">--literal-block-env</span></tt> setting also to doctest blocks.</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">(<tt class="docutils literal"><span class="pre">--literal-block-env=verbatim</span></tt> and
<tt class="docutils literal"><span class="pre">--literal-block-env=lstlistings</span></tt> fail with literal or doctest
blocks nested in an admonition.</p>
</div>
</li>
<li><p class="first">Two-way hyperlinked footnotes and support for symbol footnotes and
<tt class="docutils literal"><span class="pre">--footnote-references=brackets</span></tt> with <tt class="docutils literal"><span class="pre">--use-latex-footnotes</span></tt>.</p>
</li>
<li><p class="first">The packages <cite>fixltx2e</cite> (providing LaTeX patches and the textsubscript
command) and <cite>cmap</cite> (including character maps in the generated PDF for
better search and copy-and-paste operations) are now always loaded
(configurable with custom <a class="reference internal" href="#templates">templates</a>).</p>
</li>
</ul>
<dl class="docutils">
<dt>Backwards compatibility:</dt>
<dd>&#8220;Bug for bug compatibility&#8221; is not provided.</dd>
</dl>
</div>
<div class="section" id="new-configuration-setting-defaults">
<h4>New configuration setting defaults<a class="headerlink" href="#new-configuration-setting-defaults" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>font-encoding: &#8220;T1&#8221; (formerly implicitely set by &#8216;ae&#8217;).</li>
<li>use-latex-toc: true (ToC with page numbers).</li>
<li>use-latex-footnotes: true (no mixup with figures).</li>
</ul>
<dl class="docutils">
<dt>Backwards compatibility:</dt>
<dd><p class="first">Reset to the former defaults with:</p>
<div class="line-block">
<div class="line">font-encoding: &#8216;&#8217;</div>
<div class="line">use-latex-toc: False</div>
<div class="line">use-latex-footnotes: False</div>
</div>
<p>(in the config file) or the command line options:</p>
<blockquote class="last">
<div><tt class="docutils literal"><span class="pre">--figure-footnotes</span> <span class="pre">--use-docutils-toc</span>&nbsp; <span class="pre">--font-encoding=''</span></tt></div></blockquote>
</dd>
</dl>
</div>
<div class="section" id="cleaner-latex-source">
<h4>Cleaner LaTeX source<a class="headerlink" href="#cleaner-latex-source" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>New features:</dt>
<dd><ul class="first last simple">
<li>Remove redundant &#8220;double protection&#8221; from the encoding of the &#8220;special
printing characters&#8221; and square brackets, e.g. <tt class="docutils literal"><span class="pre">\%</span></tt> instead of
<tt class="docutils literal"><span class="pre">{\%}</span></tt>.</li>
<li>Remove some spurious whitespace, e.g. <tt class="docutils literal"><span class="pre">\item</span> <span class="pre">[what:]</span> <span class="pre">-&gt;</span> <span class="pre">\item[what:]</span></tt>.</li>
<li>Use conventional style for &#8220;named&#8221; macros, e.g. <tt class="docutils literal"><span class="pre">\dots{}</span></tt> instead of
<tt class="docutils literal"><span class="pre">{\dots}</span></tt></li>
</ul>
</dd>
<dt>Backwards compatibility:</dt>
<dd>Changes do not affect the output.</dd>
</dl>
</div>
<div class="section" id="latex-style-sheets">
<h4>LaTeX style sheets<a class="headerlink" href="#latex-style-sheets" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>New Feature:</dt>
<dd>LaTeX packages can be used as <tt class="docutils literal"><span class="pre">--stylesheet</span></tt> argument without
restriction.</dd>
<dt>Implementation:</dt>
<dd>Use <tt class="docutils literal"><span class="pre">\usepackage</span></tt> if style sheet ends with <tt class="docutils literal"><span class="pre">.sty</span></tt> or has no
extension and <tt class="docutils literal"><span class="pre">\input</span></tt> else.</dd>
<dt>Rationale:</dt>
<dd>while <tt class="docutils literal"><span class="pre">\input</span></tt> works with extension as well as without extension,
<tt class="docutils literal"><span class="pre">\usepackage</span></tt> expects the package name without extension. (The latex2e
writer will strip a <tt class="docutils literal"><span class="pre">.sty</span></tt> extension.)</dd>
<dt>Backwards compatibility:</dt>
<dd><p class="first">Up to Docutils 0.5, if no filename extension is given in the
<tt class="docutils literal"><span class="pre">stylesheet</span></tt> argument, <tt class="docutils literal"><span class="pre">.tex</span></tt> is assumed (by latex).</p>
<p class="last">Since Docutils 0.6, a stylesheet without filename extension is assumed to
be a LaTeX package (<tt class="docutils literal"><span class="pre">*.sty</span></tt>) and referenced with the <tt class="docutils literal"><span class="pre">\usepackage</span></tt>
command.</p>
</dd>
</dl>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Always specify the extension if you want the style sheet to be
<tt class="docutils literal"><span class="pre">\input</span></tt> by LaTeX.</p>
</div>
</div>
<div class="section" id="templates">
<h4>Templates<a class="headerlink" href="#templates" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>New Feature:</dt>
<dd>Advanced configuration via custom templates.</dd>
<dt>Implementation:</dt>
<dd>A <tt class="docutils literal"><span class="pre">--template</span></tt> option and config setting allows specification of a
template file.</dd>
</dl>
<p>See the <a class="reference external" href="latex.html#templates">LaTeX writer documentation</a> for details.</p>
</div>
<div class="section" id="custom-roles">
<h4>Custom roles<a class="headerlink" href="#custom-roles" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>New Feature: failsave implementation</dt>
<dd>As with classes to HTML objects, class arguments are silently ignored if
there is no styling rule for this class in a custom style sheet.</dd>
<dt>New Feature: custom roles based on standard roles</dt>
<dd>As class support needs to be handled by the LaTeX writer, this feature was
not present &#8220;automatically&#8221; (as in HTML). Modified visit/depart_*()
methods for the standard roles now call visit/depart_inline() if there are
class arguments to the node.</dd>
<dt>Backwards compatibility:</dt>
<dd>The implementation is fully backwards compatible. (SVN versions 5742 to
5861 contained an implementation that did not work with commands expecting
an argument.)</dd>
</dl>
</div>
<div class="section" id="length-units">
<h4>Length units<a class="headerlink" href="#length-units" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>New Features:</dt>
<dd><ol class="first last arabic simple">
<li>Add default unit if none given.
A poll on docutils-users favoured <tt class="docutils literal"><span class="pre">bp</span></tt> (Big Point: 1 bp  = 1/72 in).</li>
<li>Do not change <tt class="docutils literal"><span class="pre">px</span></tt> to <tt class="docutils literal"><span class="pre">pt</span></tt>.</li>
<li>Lengths specified in the document with unit &#8220;pt&#8221; will be written with
unit &#8220;bp&#8221; to the LaTeX source.</li>
</ol>
</dd>
<dt>Rationale:</dt>
<dd><ol class="first last arabic">
<li><p class="first">prevent LaTeX error &#8220;missing unit&#8221;.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">px</span></tt> is a valid unit in pdftex since version 1.3.0 released on
2005-02-04:</p>
<blockquote>
<div><p>1px defaults to 1bp (or 72dpi), but can be changed with the
<tt class="docutils literal"><span class="pre">\pdfpxdimen</span></tt> primitive.:</p>
<div class="highlight-python"><pre>\pdfpxdimen=1in % 1 dpi
\divide\pdfpxdimen by 96 % 96 dpi</pre>
</div>
<p class="attribution">&mdash;<a class="reference external" href="http://www.tug.org/applications/pdftex/NEWS">http://www.tug.org/applications/pdftex/NEWS</a></p>
</div></blockquote>
<p>Modern TeX distributions use pdftex also for dvi generation (i.e.
<tt class="docutils literal"><span class="pre">latex</span></tt> actually calls <tt class="docutils literal"><span class="pre">pdftex</span></tt> with some options).</p>
</li>
<li><p class="first">In Docutils (as well as CSS) the unit symbol &#8220;pt&#8221; denotes the
<cite>Postscript point</cite> or <cite>DTP point</cite> while LaTeX uses &#8220;pt&#8221; for the <cite>LaTeX
point</cite>, which is unknown to Docutils and 0.3&nbsp;% smaller.</p>
<p>The <cite>DTP point</cite> is available in LaTeX as &#8220;bp&#8221; (big point):</p>
<blockquote>
<div><p>1 pt = 1/72.25 in &lt; 1 bp  = 1/72 in</p>
</div></blockquote>
</li>
</ol>
</dd>
<dt>Backwards compatibility:</dt>
<dd><p class="first">Images with width specification in <tt class="docutils literal"><span class="pre">px</span></tt> come out slightly (0.3&nbsp;%) larger:</p>
<blockquote>
<div>1 px = 1 bp  = 1/72 in &gt; 1 pt = 1/72.25 in</div></blockquote>
<p>This can be reset with</p>
<div class="last highlight-python"><pre>\pdfpxdimen=1pt</pre>
</div>
</dd>
</dl>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">It is impossible to revert the change of lengths specified with
&#8220;pt&#8221; or without unit in a style sheet, however the 0.3&nbsp;% change will be
imperceptible in most cases.</p>
</div>
<div class="admonition-error-illegal-unit-px admonition">
<p class="first admonition-title">Error <tt class="docutils literal"><span class="pre">illegal</span> <span class="pre">unit</span> <span class="pre">px</span></tt></p>
<p>The unit <tt class="docutils literal"><span class="pre">px</span></tt> is not defined in &#8220;pure&#8221; LaTeX, but introduced by the
<cite>pdfTeX</cite> converter on 2005-02-04. <cite>pdfTeX</cite> is used in all modern LaTeX
distributions (since ca. 2006) also for conversion into DVI.</p>
<p>If you convert the LaTeX source with a legacy program, you might get the
error <tt class="docutils literal"><span class="pre">illegal</span> <span class="pre">unit</span> <span class="pre">px</span></tt>.</p>
<p class="last">If updating LaTeX is not an option, just remove the <tt class="docutils literal"><span class="pre">px</span></tt> from the length
specification. HTML/CSS will default to <tt class="docutils literal"><span class="pre">px</span></tt> while the <cite>latexe2</cite> writer
will add the fallback unit <tt class="docutils literal"><span class="pre">bp</span></tt>.</p>
</div>
</div>
<div class="section" id="font-encoding">
<h4>Font encoding<a class="headerlink" href="#font-encoding" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>New feature:</dt>
<dd><p class="first">Do not mix font-encoding and font settings: do not load the obsolete
<cite>ae</cite> and <cite>aeguill</cite> packages unless explicitely required via the
<tt class="docutils literal"><span class="pre">--stylesheet</span></tt> option.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">font-encoding = &#8220;&#8221;:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><p class="first">do not load <cite>ae</cite> and <cite>aeguill</cite>, i.e.</p>
<ul class="simple">
<li>do not change font settings,</li>
<li>do not use the fontenc package
(implicitely loaded via <cite>ae</cite>),</li>
<li>use LaTeX default font encoding (OT1)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">font-encoding = &#8220;OT1&#8221;:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first last">load <cite>fontenc</cite> with <tt class="docutils literal"><span class="pre">\usepackage[OT1]{fontenc}</span></tt></p>
</td>
</tr>
</tbody>
</table>
</dd>
<dt>Example:</dt>
<dd><tt class="docutils literal"><span class="pre">--font-encoding=LGR,T1</span></tt> becomes <tt class="docutils literal"><span class="pre">\usepackage[LGR,T1]{fontenc}</span></tt>
(Latin, Latin-1 Supplement, and Greek)</dd>
<dt>Backwards compatibility:</dt>
<dd>Load the ae and aeguill packages if fontenc is not used.</dd>
</dl>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Using <cite>ae</cite> is not recommended. A similar look (but better
implementation) can be achieved with the packages <cite>lmodern</cite>, <cite>cmsuper</cite>,
or <cite>cmlgr</cite> all providing Computer Modern look-alikes in vector format and
T1 encoding, e.g. <tt class="docutils literal"><span class="pre">--font-encoding=T1</span> <span class="pre">--stylesheet=lmodern</span></tt>.</p>
</div>
</div>
<div class="section" id="sub-and-superscript-as-text">
<h4>Sub- and superscript as text<a class="headerlink" href="#sub-and-superscript-as-text" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>New feature:</dt>
<dd><p class="first">Set sub- and superscript role argument in text mode not as math.</p>
<p class="last">Pass the role content to <tt class="docutils literal"><span class="pre">\textsubscript</span></tt> or <tt class="docutils literal"><span class="pre">\textsuperscript</span></tt>.</p>
</dd>
<dt>Backwards compatibility:</dt>
<dd><p class="first">The old implementation set the role content in Math mode, where</p>
<ul class="simple">
<li>whitespace is ignored,</li>
<li>a different command set and font setting scheme is active,</li>
<li>Latin letters are typeset italic but numbers upright.</li>
</ul>
<p class="last">Although it is possible to redefine <tt class="docutils literal"><span class="pre">\textsubscript</span></tt> and
<tt class="docutils literal"><span class="pre">\textsuperscript</span></tt> to typeset the content in math-mode, this can lead to
errors with certain input and is therefore not done in this style sheet.</p>
</dd>
</dl>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p>To get italic subscripts, define and use in your document
<a class="reference internal" href="#custom-roles">custom roles</a> like <tt class="docutils literal"><span class="pre">..</span> <span class="pre">role::</span> <span class="pre">sub(subscript)</span></tt> and
<tt class="docutils literal"><span class="pre">..</span> <span class="pre">role::</span> <span class="pre">super(superscript)</span></tt> and define the &#8220;role commands&#8221;:</p>
<div class="highlight-python"><pre>\newcommand{\DUrolesub}{\itshape}
\newcommand{\DUrolesuper}{\itshape}</pre>
</div>
<p>Alternatively, if you want all sub- and superscripts in italic, redefine
the macros:</p>
<div class="highlight-python"><pre>%% \let\DUsup\textsubscript
%% \let\DUsuper\textsuperscript
%% \renewcommand*{\textsubscript}{\DUsub\itshape}
%% \renewcommand*{\textsuperscript}{\DUsuper\itshape}</pre>
</div>
<p class="last">This is not fully backwards compatible, as it will also set numbers in
italic shape and not ignore whitespace.</p>
</div>
</div>
<div class="section" id="page-layout">
<h4>Page layout<a class="headerlink" href="#page-layout" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>New features:</dt>
<dd><ul class="first last simple">
<li>Margins are configurable via the <tt class="docutils literal"><span class="pre">DIV=...</span></tt> document option.</li>
<li>The <tt class="docutils literal"><span class="pre">\raggedbottom</span></tt> setting is no longer inserted into the document. It
is the default for article and report classes. If requested in combination
with a book class, it can be given in a custom style sheet.</li>
</ul>
</dd>
<dt>Backwards compatibility:</dt>
<dd><p class="first">Up to version 0.5, use of <cite>typearea</cite> and a DIV setting of 12 were
hard-coded into the latex2e writer</p>
<div class="highlight-python"><pre>\usepackage{typearea}
\typearea{12}</pre>
</div>
<p>and the vertical alignment of lower boundary of the text area in book
classes disabled via</p>
<div class="last highlight-python"><pre>\raggedbottom</pre>
</div>
</dd>
</dl>
</div>
<div class="section" id="toc-and-section-numbers">
<h4>ToC and section numbers<a class="headerlink" href="#toc-and-section-numbers" title="Permalink to this headline">¶</a></h4>
<p>Better conformance to Docutils specifications.</p>
<dl class="docutils">
<dt>New feature:</dt>
<dd><ul class="first last simple">
<li>The &#8220;depth&#8221; argument of the &#8220;contents&#8221; and &#8220;sectnum&#8221; directives is
respected.</li>
<li>section numbering independent of &#8216;use-latex-toc&#8217;:<ul>
<li>sections are only numbered if there is a &#8220;sectnum&#8221; directive in the
document</li>
<li>section numbering by LaTeX if the &#8220;sectnum_xforms&#8221; config setting is
False.</li>
</ul>
</li>
</ul>
</dd>
</dl>
<p>Backwards compatibility:</p>
<blockquote>
<div><p>The previous behaviour was to always number sections if &#8216;use-latex-toc&#8217; is
true, using the document class defaults. It cannot be restored
universally, the following code sets the default values of the &#8220;article&#8221;
document class:</p>
<div class="highlight-python"><pre>\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}</pre>
</div>
</div></blockquote>
<dl class="docutils">
<dt>New feature:</dt>
<dd>If &#8216;use-latex-toc&#8217; is set, local tables of content are typeset using the
&#8216;minitoc&#8217; package (instead of being ignored).</dd>
<dt>Backwards compatibility:</dt>
<dd>Disable the creation of local ToCs (ignoring all special commands) by
replacing <tt class="docutils literal"><span class="pre">\usepackage{minitoc}</span> <span class="pre">with</span> <span class="pre">``\usepackage{mtcoff}</span></tt>.</dd>
</dl>
</div>
<div class="section" id="default-font-in-admonitions-and-sidebar">
<h4>Default font in admonitions and sidebar<a class="headerlink" href="#default-font-in-admonitions-and-sidebar" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>New feature:</dt>
<dd>Use default font in admonitions and sidebar.</dd>
<dt>Backward compatibility:</dt>
<dd>See the fallback definitions for <a class="reference internal" href="#admonitions">admonitions</a>, <a class="reference internal" href="#topic-title">topic title</a> and
<a class="reference internal" href="#sidebar">sidebar</a>.</dd>
</dl>
</div>
<div class="section" id="figure-placement">
<h4>Figure placement<a class="headerlink" href="#figure-placement" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>New feature:</dt>
<dd><p class="first">Use <tt class="docutils literal"><span class="pre">\floatplacement</span></tt> from the <cite>float</cite> package instead of
&#8220;hard-coded&#8221; optional argument for the global setting.</p>
<p class="last">Default to <tt class="docutils literal"><span class="pre">\floatplacement{figure}{H}</span></tt> (here definitely). This
corresponds most closely to the source and HTML placement (principle of
least surprise).</p>
</dd>
<dt>Backwards compatibility:</dt>
<dd><p class="first">Set the global default back to the previous used value:</p>
<div class="last highlight-python"><pre>\usepackage{float}
\floatplacement{figure}{htbp} % here, top, bottom, extra-page</pre>
</div>
</dd>
</dl>
</div>
<div class="section" id="figure-and-image-alignment">
<h4>Figure and image alignment<a class="headerlink" href="#figure-and-image-alignment" title="Permalink to this headline">¶</a></h4>
<p>New features:</p>
<ol class="loweralpha">
<li><p class="first">Fix behaviour of &#8216;align&#8217; argument to a figure (do not align figure
contents).</p>
<p>As the &#8216;figwidth&#8217; argument is still ignored and the &#8220;natural width&#8221; of a
figure in LaTeX is 100% textwidth, setting the &#8216;align&#8217; argument of a
figure has currently no effect on the LaTeX output.</p>
</li>
<li><p class="first">Set default align of image in a figure to &#8216;center&#8217;.</p>
</li>
<li><p class="first">Also center images that are wider than textwidth.</p>
</li>
<li><p class="first">Align images with class &#8220;align-[right|center|left]&#8221; (allows setting the
alignment of an image in a figure).</p>
</li>
</ol>
<dl class="docutils">
<dt>Backwards compatibility:</dt>
<dd>There is no &#8220;automatic&#8221; way to reverse these changes via a style sheet.</dd>
</dl>
<ol class="loweralpha">
<li><p class="first">The alignment of the image can be set with the &#8220;align-left&#8221;,
&#8220;align-center&#8221; and &#8220;align-right&#8221; class arguments.</p>
<p>As previously, the caption of a figure is aligned according to the
document class &#8211; configurable with a style sheet using the &#8220;caption&#8221;
package.</p>
</li>
<li><p class="first">See a)</p>
</li>
<li><p class="first">Set the alignment of &#8220;oversized&#8221; images to &#8220;left&#8221; to get back the
old placement.</p>
</li>
</ol>
</div>
<div class="section" id="shorter-preamble">
<h4>Shorter preamble<a class="headerlink" href="#shorter-preamble" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>New feature:</dt>
<dd>The document preamble is pruned to contain only relevant commands and
settings.</dd>
</dl>
<div class="section" id="packages-that-are-no-longer-required">
<h5>Packages that are no longer required<a class="headerlink" href="#packages-that-are-no-longer-required" title="Permalink to this headline">¶</a></h5>
<p>The following packages where required in pre-0.5 versions and still loaded
with version 0.5:</p>
<div class="highlight-python"><pre>\usepackage{shortvrb}
\usepackage{amsmath}</pre>
</div>
</div>
<div class="section" id="packages-that-are-conditionally-loaded">
<h5>Packages that are conditionally loaded<a class="headerlink" href="#packages-that-are-conditionally-loaded" title="Permalink to this headline">¶</a></h5>
<p>Additional to the <cite>typearea</cite> for <a class="reference internal" href="#page-layout">page layout</a>, the following packages are
only loaded if actually required by doctree elements:</p>
<div class="section" id="tables">
<h6>Tables<a class="headerlink" href="#tables" title="Permalink to this headline">¶</a></h6>
<p>Standard package for tables across several pages:</p>
<div class="highlight-python"><pre>\usepackage{longtable}</pre>
</div>
<p>Extra space between text in tables and the line above them
(&#8216;array&#8217; is implicitely loaded by &#8216;tabularx&#8217;, see below):</p>
<div class="highlight-python"><pre>\usepackage{array}
\setlength{\extrarowheight}{2pt}</pre>
</div>
<p>Table cells spanning multiple rows:</p>
<div class="highlight-python"><pre>\usepackage{multirow}</pre>
</div>
</div>
<div class="section" id="docinfo">
<h6>Docinfo<a class="headerlink" href="#docinfo" title="Permalink to this headline">¶</a></h6>
<p>One-page tables with auto-width columns:</p>
<div class="highlight-python"><pre>\usepackage{tabularx}</pre>
</div>
</div>
<div class="section" id="images">
<h6>Images<a class="headerlink" href="#images" title="Permalink to this headline">¶</a></h6>
<p>Include graphic files:</p>
<div class="highlight-python"><pre>\usepackage{graphicx}</pre>
</div>
</div>
<div class="section" id="problematic-sidebar">
<h6>Problematic, Sidebar<a class="headerlink" href="#problematic-sidebar" title="Permalink to this headline">¶</a></h6>
<p>Set text and/or background colour, coloured boxes with <tt class="docutils literal"><span class="pre">\colorbox</span></tt>:</p>
<div class="highlight-python"><pre>\usepackage{color}</pre>
</div>
</div>
</div>
<div class="section" id="floats-for-footnotes-settings">
<h5>Floats for footnotes settings<a class="headerlink" href="#floats-for-footnotes-settings" title="Permalink to this headline">¶</a></h5>
<p>Settings for the use of floats for footnotes are only included if</p>
<ul class="simple">
<li>the option &#8220;use-latex-footnotes&#8221; is False, and</li>
<li>there is at least one footnote in the document.</li>
</ul>
<div class="highlight-python"><pre>% begin: floats for footnotes tweaking.
\setlength{\floatsep}{0.5em}
\setlength{\textfloatsep}{\fill}
\addtolength{\textfloatsep}{3em}
\renewcommand{\textfraction}{0.5}
\renewcommand{\topfraction}{0.5}
\renewcommand{\bottomfraction}{0.5}
\setcounter{totalnumber}{50}
\setcounter{topnumber}{50}
\setcounter{bottomnumber}{50}
% end floats for footnotes</pre>
</div>
</div>
</div>
<div class="section" id="special-lengths-commands-and-environments">
<h4>Special lengths, commands, and environments<a class="headerlink" href="#special-lengths-commands-and-environments" title="Permalink to this headline">¶</a></h4>
<div class="section" id="removed-definitions">
<h5>Removed definitions<a class="headerlink" href="#removed-definitions" title="Permalink to this headline">¶</a></h5>
<div class="section" id="admonition-width">
<h6>admonition width<a class="headerlink" href="#admonition-width" title="Permalink to this headline">¶</a></h6>
<p>The <tt class="docutils literal"><span class="pre">admonitionwith</span></tt> lenght is replaced by the more powerful
<tt class="docutils literal"><span class="pre">\DUadmonition</span></tt> command (see <a class="reference internal" href="#admonitions">admonitions</a>).</p>
<dl class="docutils">
<dt>Backwards compatibility:</dt>
<dd><p class="first">The default value (90&nbsp;% of the textwidth) is unchanged.</p>
<p class="last">To configure the admonition width, you must redefine the <tt class="docutils literal"><span class="pre">DUadmonition</span></tt>
command instead of changing the <tt class="docutils literal"><span class="pre">admonitionwith</span></tt> length value.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="renamed-definitions-now-conditional">
<h5>Renamed definitions (now conditional)<a class="headerlink" href="#renamed-definitions-now-conditional" title="Permalink to this headline">¶</a></h5>
<p>The names for special doctree elements are now prefixed with <tt class="docutils literal"><span class="pre">DU</span></tt>.</p>
<p>Up to version 0.5, all definitions were included in the preamble (before the
style sheet) of every document &#8211; even if not used in the body. Since
version 0.6, fallback definitions are included after the style sheet and
only if required.</p>
<p>Customization is done by an alternative definition in a style sheet with
<tt class="docutils literal"><span class="pre">\newcommand</span></tt> instead of the former <tt class="docutils literal"><span class="pre">\renewcommand</span></tt>.</p>
<p>The following code provides the old definitions and maps them (or their
custom variants) to the new interface.</p>
<div class="section" id="docinfo-width">
<h6>docinfo width<a class="headerlink" href="#docinfo-width" title="Permalink to this headline">¶</a></h6>
<div class="highlight-python"><pre>\newlength{\docinfowidth}
\setlength{\docinfowidth}{0.9\textwidth}

\newlength{\DUdocinfowidth}
\AtBeginDocument{\setlength{\DUdocinfowidth}{\docinfowidth}}</pre>
</div>
</div>
<div class="section" id="line-block">
<h6>line block<a class="headerlink" href="#line-block" title="Permalink to this headline">¶</a></h6>
<div class="highlight-python"><pre>\newlength{\lineblockindentation}
\setlength{\lineblockindentation}{2.5em}
\newenvironment{lineblock}[1]
{\begin{list}{}
  {\setlength{\partopsep}{\parskip}
   \addtolength{\partopsep}{\baselineskip}
   \topsep0pt\itemsep0.15\baselineskip\parsep0pt
   \leftmargin#1}
 \raggedright}
{\end{list}}

\newlength{\DUlineblockindent}
\AtBeginDocument{\setlength{\DUlineblockindent}{\lineblockindentation}}
\newenvironment{DUlineblock}[1]
  {\begin{lineblock}{#1}}
  {\end{lineblock}}</pre>
</div>
</div>
<div class="section" id="local-line-width">
<h6>local line width<a class="headerlink" href="#local-line-width" title="Permalink to this headline">¶</a></h6>
<p>The <tt class="docutils literal"><span class="pre">\locallinewidth</span></tt> length for internal use in tables is replaced
by <tt class="docutils literal"><span class="pre">\DUtablewidth</span></tt>. It was never intended for customization:</p>
<div class="highlight-python"><pre>\newlength{\locallinewidth}</pre>
</div>
</div>
<div class="section" id="option-lists">
<h6>option lists<a class="headerlink" href="#option-lists" title="Permalink to this headline">¶</a></h6>
<div class="highlight-python"><pre>\newcommand{\optionlistlabel}[1]{\bf #1 \hfill}
\newenvironment{optionlist}[1]
{\begin{list}{}
  {\setlength{\labelwidth}{#1}
   \setlength{\rightmargin}{1cm}
   \setlength{\leftmargin}{\rightmargin}
   \addtolength{\leftmargin}{\labelwidth}
   \addtolength{\leftmargin}{\labelsep}
   \renewcommand{\makelabel}{\optionlistlabel}}
}{\end{list}}

\newcommand{\DUoptionlistlabel}{\optionlistlabel}
\newenvironment{DUoptionlist}
  {\begin{optionlist}{3cm}}
  {\end{optionlist}}</pre>
</div>
</div>
<div class="section" id="rubric">
<h6>rubric<a class="headerlink" href="#rubric" title="Permalink to this headline">¶</a></h6>
<p>Now less prominent (not bold, normal size) restore with:</p>
<div class="highlight-python"><pre>\newcommand{\rubric}[1]{\subsection*{~\hfill {\it #1} \hfill ~}}
\newcommand{\DUrubric}[2][class-arg]{\rubric{#2}}</pre>
</div>
</div>
<div class="section" id="title-reference-role">
<h6>title reference role<a class="headerlink" href="#title-reference-role" title="Permalink to this headline">¶</a></h6>
<div class="highlight-python"><pre>\newcommand{\titlereference}[1]{\textsl{#1}}
\newcommand{\DUroletitlereference}[1]{\titlereference{#1}}</pre>
</div>
</div>
</div>
<div class="section" id="new-definitions">
<h5>New definitions<a class="headerlink" href="#new-definitions" title="Permalink to this headline">¶</a></h5>
<dl class="docutils">
<dt>New Feature:</dt>
<dd><p class="first">Enable customization of some more Docutils elements with special commands</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">admonition:</th><td class="field-body"><tt class="docutils literal"><span class="pre">DUadmonition</span></tt> command (replacing <tt class="docutils literal"><span class="pre">\admonitionwidth</span></tt>),</td>
</tr>
<tr class="field-even field"><th class="field-name">field list:</th><td class="field-body"><tt class="docutils literal"><span class="pre">DUfieldlist</span></tt>  environment,</td>
</tr>
<tr class="field-odd field"><th class="field-name">legend:</th><td class="field-body"><tt class="docutils literal"><span class="pre">DUlegend</span></tt>     environment,</td>
</tr>
<tr class="field-even field"><th class="field-name">sidebar:</th><td class="field-body"><tt class="docutils literal"><span class="pre">\DUsidebar</span></tt>, <tt class="docutils literal"><span class="pre">\DUtitle</span></tt>, and
<tt class="docutils literal"><span class="pre">DUsubtitle</span></tt> commands,</td>
</tr>
<tr class="field-odd field"><th class="field-name">topic:</th><td class="field-body"><tt class="docutils literal"><span class="pre">\DUtopic</span></tt> and <tt class="docutils literal"><span class="pre">\DUtitle</span></tt> commands,</td>
</tr>
<tr class="field-even field"><th class="field-name">transition:</th><td class="field-body"><tt class="docutils literal"><span class="pre">\DUtransition</span></tt> command.</td>
</tr>
<tr class="field-odd field"><th class="field-name">footnotes:</th><td class="field-body"><tt class="docutils literal"><span class="pre">\DUfootnotemark</span></tt> and <tt class="docutils literal"><span class="pre">\DUfootnotetext</span></tt> commands with
hyperlink support using the Docutils-provided footnote label.</td>
</tr>
</tbody>
</table>
</dd>
<dt>Backwards compatibility:</dt>
<dd>In most cases, the default definition corresponds to the previously used
construct. The following definitions restore the old behaviour in case of
changes.</dd>
</dl>
<div class="section" id="admonitions">
<h6>admonitions<a class="headerlink" href="#admonitions" title="Permalink to this headline">¶</a></h6>
<p>Use sans-serif fonts:</p>
<div class="highlight-python"><pre>\newcommand{\DUadmonition}[2][class-arg]{%
  \begin{center}
    \fbox{\parbox{0.9\textwidth}{\sffamily #2}}
  \end{center}
}</pre>
</div>
</div>
<div class="section" id="dedication">
<h6>dedication<a class="headerlink" href="#dedication" title="Permalink to this headline">¶</a></h6>
<p>Do not center:</p>
<div class="highlight-python"><pre>\newcommand{\DUtopicdedication}[1]{#1}</pre>
</div>
<p>But center the title:</p>
<div class="highlight-python"><pre>\newcommand*{\DUtitlededication}[1]{\centerline{\textbf{#1}}}</pre>
</div>
</div>
<div class="section" id="sidebar">
<h6>sidebar<a class="headerlink" href="#sidebar" title="Permalink to this headline">¶</a></h6>
<p>Use sans-serif fonts, a frame, and a darker shade of grey:</p>
<div class="highlight-python"><pre>\providecommand{\DUsidebar}[2][class-arg]{%
  \begin{center}
    \sffamily
    \fbox{\colorbox[gray]{0.80}{\parbox{0.9\textwidth}{#2}}}
  \end{center}
}</pre>
</div>
</div>
<div class="section" id="sidebar-sub-title">
<h6>sidebar sub-title<a class="headerlink" href="#sidebar-sub-title" title="Permalink to this headline">¶</a></h6>
<p>Bold instead of emphasized:</p>
<div class="highlight-python"><pre>\providecommand*{\DUsubtitlesidebar}[1]{\hspace*{\fill}\\
  \textbf{#1}\smallskip}</pre>
</div>
</div>
<div class="section" id="topic">
<h6>topic<a class="headerlink" href="#topic" title="Permalink to this headline">¶</a></h6>
<p>No quote but normal text:</p>
<div class="highlight-python"><pre>\newcommand{\DUtopic}[2][class-arg]{%
  \ifcsname DUtopic#1\endcsname%
    \csname DUtopic#1\endcsname{#2}%
  \else
    #2
  \fi
}</pre>
</div>
</div>
<div class="section" id="topic-title">
<h6>topic title<a class="headerlink" href="#topic-title" title="Permalink to this headline">¶</a></h6>
<p>Title for &#8220;topics&#8221; (admonitions, sidebar).</p>
<p>Larger font size:</p>
<div class="highlight-python"><pre>\providecommand*{\DUtitletopic}[1]{\textbf{\large #1}\smallskip}</pre>
</div>
</div>
<div class="section" id="transition">
<h6>transition<a class="headerlink" href="#transition" title="Permalink to this headline">¶</a></h6>
<p>Do not add vertical space after the transition.</p>
<div class="highlight-python"><pre>\providecommand*{\DUtransition}[1][class-arg]{%
  \hspace*{\fill}\hrulefill\hspace*{\fill}}</pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Changes to the Docutils latex2e writer since version 0.5</a><ul>
<li><a class="reference internal" href="#a-backwards-compatibility-style-sheet">A backwards compatibility style sheet</a><ul>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#changes-since-0-5">Changes since 0.5</a><ul>
<li><a class="reference internal" href="#bugfixes">Bugfixes</a></li>
<li><a class="reference internal" href="#new-configuration-setting-defaults">New configuration setting defaults</a></li>
<li><a class="reference internal" href="#cleaner-latex-source">Cleaner LaTeX source</a></li>
<li><a class="reference internal" href="#latex-style-sheets">LaTeX style sheets</a></li>
<li><a class="reference internal" href="#templates">Templates</a></li>
<li><a class="reference internal" href="#custom-roles">Custom roles</a></li>
<li><a class="reference internal" href="#length-units">Length units</a></li>
<li><a class="reference internal" href="#font-encoding">Font encoding</a></li>
<li><a class="reference internal" href="#sub-and-superscript-as-text">Sub- and superscript as text</a></li>
<li><a class="reference internal" href="#page-layout">Page layout</a></li>
<li><a class="reference internal" href="#toc-and-section-numbers">ToC and section numbers</a></li>
<li><a class="reference internal" href="#default-font-in-admonitions-and-sidebar">Default font in admonitions and sidebar</a></li>
<li><a class="reference internal" href="#figure-placement">Figure placement</a></li>
<li><a class="reference internal" href="#figure-and-image-alignment">Figure and image alignment</a></li>
<li><a class="reference internal" href="#shorter-preamble">Shorter preamble</a><ul>
<li><a class="reference internal" href="#packages-that-are-no-longer-required">Packages that are no longer required</a></li>
<li><a class="reference internal" href="#packages-that-are-conditionally-loaded">Packages that are conditionally loaded</a><ul>
<li><a class="reference internal" href="#tables">Tables</a></li>
<li><a class="reference internal" href="#docinfo">Docinfo</a></li>
<li><a class="reference internal" href="#images">Images</a></li>
<li><a class="reference internal" href="#problematic-sidebar">Problematic, Sidebar</a></li>
</ul>
</li>
<li><a class="reference internal" href="#floats-for-footnotes-settings">Floats for footnotes settings</a></li>
</ul>
</li>
<li><a class="reference internal" href="#special-lengths-commands-and-environments">Special lengths, commands, and environments</a><ul>
<li><a class="reference internal" href="#removed-definitions">Removed definitions</a><ul>
<li><a class="reference internal" href="#admonition-width">admonition width</a></li>
</ul>
</li>
<li><a class="reference internal" href="#renamed-definitions-now-conditional">Renamed definitions (now conditional)</a><ul>
<li><a class="reference internal" href="#docinfo-width">docinfo width</a></li>
<li><a class="reference internal" href="#line-block">line block</a></li>
<li><a class="reference internal" href="#local-line-width">local line width</a></li>
<li><a class="reference internal" href="#option-lists">option lists</a></li>
<li><a class="reference internal" href="#rubric">rubric</a></li>
<li><a class="reference internal" href="#title-reference-role">title reference role</a></li>
</ul>
</li>
<li><a class="reference internal" href="#new-definitions">New definitions</a><ul>
<li><a class="reference internal" href="#admonitions">admonitions</a></li>
<li><a class="reference internal" href="#dedication">dedication</a></li>
<li><a class="reference internal" href="#sidebar">sidebar</a></li>
<li><a class="reference internal" href="#sidebar-sub-title">sidebar sub-title</a></li>
<li><a class="reference internal" href="#topic">topic</a></li>
<li><a class="reference internal" href="#topic-title">topic title</a></li>
<li><a class="reference internal" href="#transition">transition</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/docs/user/docutils-05-compat.sty.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li><a href="../../index.html">klb3713&#39;s notebook</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, klb3713.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>