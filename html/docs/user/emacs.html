
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Emacs Support for reStructuredText &mdash; klb3713&#39;s notebook</title>
    
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="klb3713&#39;s notebook" href="../../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="../../index.html">klb3713&#39;s notebook</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="emacs-support-for-restructuredtext">
<h1><a class="toc-backref" href="#id2">Emacs Support for reStructuredText</a><a class="headerlink" href="#emacs-support-for-restructuredtext" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Author:</th><td class="field-body">Martin Blais &lt;<a class="reference external" href="mailto:blais&#37;&#52;&#48;furius&#46;ca">blais<span>&#64;</span>furius<span>&#46;</span>ca</a>&gt;</td>
</tr>
<tr class="field-even field"><th class="field-name">Date:</th><td class="field-body">$Date: 2010-06-17 22:16:08 +0200 (Do, 17. Jun 2010) $</td>
</tr>
<tr class="field-odd field"><th class="field-name">Abstract:</th><td class="field-body">High-level description of the existing emacs support for editing
reStructuredText text documents.  Suggested setup code and usage
instructions are provided.</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#emacs-support-for-restructuredtext" id="id2">Emacs Support for reStructuredText</a><ul>
<li><a class="reference internal" href="#introduction" id="id3">Introduction</a></li>
<li><a class="reference internal" href="#installation" id="id4">Installation</a></li>
<li><a class="reference internal" href="#usage" id="id5">Usage</a></li>
<li><a class="reference internal" href="#section-decorations" id="id6">Section Decorations</a><ul>
<li><a class="reference internal" href="#adjusting-a-section-title" id="id7">Adjusting a Section Title</a></li>
<li><a class="reference internal" href="#promoting-and-demoting-many-sections" id="id8">Promoting and Demoting Many Sections</a></li>
<li><a class="reference internal" href="#redoing-all-the-decorations-to-your-taste" id="id9">Redoing All the Decorations to Your Taste</a></li>
<li><a class="reference internal" href="#customizations-for-decorations" id="id10">Customizations for Decorations</a></li>
<li><a class="reference internal" href="#viewing-the-hierarchy-of-section-decorations" id="id11">Viewing the Hierarchy of Section Decorations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#section-movement-and-selection" id="id12">Section Movement and Selection</a></li>
<li><a class="reference internal" href="#operating-on-blocks-of-text" id="id13">Operating on Blocks of Text</a><ul>
<li><a class="reference internal" href="#shifting-text-horizontally-intelligently" id="id14">Shifting Text Horizontally Intelligently</a></li>
<li><a class="reference internal" href="#bulleting-and-enumerating-lists" id="id15">Bulleting and Enumerating Lists</a><ul>
<li><a class="reference internal" href="#straightening-existing-bullet-list-hierarchies" id="id16">Straightening Existing Bullet List Hierarchies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#creating-and-removing-line-blocks" id="id17">Creating and Removing Line Blocks</a></li>
<li><a class="reference internal" href="#commenting-a-region-of-text" id="id18">Commenting a Region of Text</a></li>
</ul>
</li>
<li><a class="reference internal" href="#converting-documents-from-emacs" id="id19">Converting Documents from Emacs</a></li>
<li><a class="reference internal" href="#table-of-contents-features" id="id20">Table-of-Contents Features</a><ul>
<li><a class="reference internal" href="#inserting-a-table-of-contents" id="id21">Inserting a Table of Contents</a></li>
<li><a class="reference internal" href="#maintaining-the-table-of-contents-up-to-date" id="id22">Maintaining the Table of Contents Up-to-date</a></li>
</ul>
</li>
<li><a class="reference internal" href="#syntax-highlighting-via-font-lock" id="id23">Syntax Highlighting via Font-Lock</a><ul>
<li><a class="reference internal" href="#face-customization" id="id24">Face Customization</a><ul>
<li><a class="reference internal" href="#default-fonts" id="id25">Default Fonts</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#other-useful-settings" id="id26">Other Useful Settings</a><ul>
<li><a class="reference internal" href="#text-mode-settings" id="id27"><tt class="docutils literal"><span class="pre">text-mode</span></tt> Settings</a></li>
<li><a class="reference internal" href="#editing-tables-emacs-table-mode" id="id28">Editing Tables: Emacs table mode</a></li>
<li><a class="reference internal" href="#character-processing" id="id29">Character Processing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#credits" id="id30">Credits</a><ul>
<li><a class="reference internal" href="#obsolete-files" id="id31">Obsolete Files</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id3">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://docutils.sf.net/rst.html">reStructuredText</a> is a series of conventions that allows a
toolset&#8211;docutils&#8211;to extract generic document structure from simple
text files. For people who use <a class="reference external" href="http://www.gnu.org/software/emacs/emacs.html">Emacs</a>, there is a package that adds a
major mode that supports editing in the conventions of
<a class="reference external" href="http://docutils.sf.net/rst.html">reStructuredText</a>: <tt class="docutils literal"><span class="pre">rst.el</span></tt>. This document describes the features it
provides, and how to setup your emacs to use them and how to invoke
them.</p>
</div>
<div class="section" id="installation">
<h2><a class="toc-backref" href="#id4">Installation</a><a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Emacs support for reStructuredText is implemented as an Emacs major
mode (<tt class="docutils literal"><span class="pre">rst-mode</span></tt>) provided by the <tt class="docutils literal"><span class="pre">rst.el</span></tt> emacs package.</p>
<p>For recent versions of Emacs, there&#8217;s no need to install anything to
get reST support; <tt class="docutils literal"><span class="pre">rst-mode</span></tt> is already available. So:</p>
<div class="highlight-python"><pre>M-x rst-mode</pre>
</div>
<p>will work out of the box.  If this works for you, please skip to the
<a class="reference internal" href="#usage">Usage</a> section.</p>
<p>For older versions of Emacs, <tt class="docutils literal"><span class="pre">rst.el</span></tt> can be found in the
<tt class="docutils literal"><span class="pre">tools/editors/emacs/</span></tt> directory of the Docutils snapshot or
repository.  <a class="reference external" href="http://docutils.sourceforge.net/tools/editors/emacs/rst.el">A copy can also be downloaded here.</a></p>
<p>In order to use <tt class="docutils literal"><span class="pre">rst-mode</span></tt>, you need to put the <tt class="docutils literal"><span class="pre">rst.el</span></tt> in a
directory located in your emacs <tt class="docutils literal"><span class="pre">load-path</span></tt> (use <tt class="docutils literal"><span class="pre">C-h</span> <span class="pre">v</span> <span class="pre">load-path</span></tt>
to check).</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id5">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>Load rst-mode with:</p>
<div class="highlight-python"><pre>(require 'rst)</pre>
</div>
<p>To enable <tt class="docutils literal"><span class="pre">rst-mode</span></tt>, simply type <tt class="docutils literal"><span class="pre">M-x</span> <span class="pre">rst-mode</span></tt>. Alternatively,
you can modify <tt class="docutils literal"><span class="pre">auto-mode-alist</span></tt> to automatically turn it on
whenever you visit <a class="reference external" href="http://docutils.sf.net/rst.html">reStructuredText</a> documents:</p>
<div class="highlight-python"><pre>(setq auto-mode-alist
      (append '(("\\.txt$" . rst-mode)
                ("\\.rst$" . rst-mode)
                ("\\.rest$" . rst-mode)) auto-mode-alist))</pre>
</div>
<p>If have local variables enabled (see <tt class="docutils literal"><span class="pre">enable-local-variables</span></tt> in the
Emacs manual), you can also add the following at the top of your
documents to trigger rst-mode:</p>
<div class="highlight-python"><pre>.. -*- mode: rst -*-</pre>
</div>
<p>Or this at the end of your documents:</p>
<div class="highlight-python"><pre>..
   Local Variables:
   mode: rst
   End:</pre>
</div>
<p><tt class="docutils literal"><span class="pre">rst-mode</span></tt> automatically binds several keys for invoking special
handy functions for editing ReStructuredText. As is the custom for
Emacs major modes, most keys are bound to <tt class="docutils literal"><span class="pre">C-c</span> <span class="pre">C-LETTER</span></tt>.</p>
<p>If you insert an inline table-of-contents at the top of the document,
you may want to add a hook to automatically update it everytime you
adjust a section title:</p>
<div class="highlight-python"><pre>(add-hook 'rst-adjust-hook 'rst-toc-update)</pre>
</div>
<p>Additional configuration variables can be customized and can be found
by browsing the source code for <tt class="docutils literal"><span class="pre">rst.el</span></tt>.</p>
</div>
<div class="section" id="section-decorations">
<h2><a class="toc-backref" href="#id6">Section Decorations</a><a class="headerlink" href="#section-decorations" title="Permalink to this headline">¶</a></h2>
<p>The rst package does not completely parse all the <a class="reference external" href="http://docutils.sf.net/rst.html">reStructuredText</a>
constructs, but it contains the ability to recognize the section
decorations and to build the hierarchy of the document. What we call
section decorations or adornments are the underlines or under- and
overlines used to mark a section title.</p>
<div class="section" id="adjusting-a-section-title">
<h3><a class="toc-backref" href="#id7">Adjusting a Section Title</a><a class="headerlink" href="#adjusting-a-section-title" title="Permalink to this headline">¶</a></h3>
<p>There is a function that helps a great deal to maintain these
decorations: <tt class="docutils literal"><span class="pre">rst-adjust</span></tt> (bound to <tt class="docutils literal"><span class="pre">C-c</span> <span class="pre">C-a</span></tt>, or <tt class="docutils literal"><span class="pre">C-=</span></tt> by
default). This function is a Swiss army knife that can be invoked
repeatedly and whose behaviour depends on context:</p>
<ol class="arabic">
<li><p class="first">If there is an incomplete underline, e.g.:</p>
<div class="highlight-python"><pre>My Section Title
^^</pre>
</div>
<p>Invocation will complete the section title.  You can simply enter a
few characters of the title and invoke the function to complete it.
It can also be used to adjust the length of the existing decoration
when you need to edit the title.</p>
</li>
<li><p class="first">If there is no section decoration, a decoration one level under the
last encountered section level is added;</p>
</li>
<li><p class="first">If there is already a section decoration, it is promoted to the
next level.  You can invoke it like this repeatedly to cycle the
title through the hierarchy of existing decorations.</p>
</li>
</ol>
<p>Invoking the function with a negative prefix argument, e.g. <tt class="docutils literal"><span class="pre">C--</span>
<span class="pre">C-=</span></tt>, will effectively reverse the direction of decoration cycling.
To alternate between underline-only and over-and-under styles, you can
use a regular prefix argument, e.g. <tt class="docutils literal"><span class="pre">C-u</span> <span class="pre">C-=</span></tt>.  See the
documentation of <tt class="docutils literal"><span class="pre">rst-adjust</span></tt> for more description of the prefix
arguments to alter the behaviour of the function.</p>
</div>
<div class="section" id="promoting-and-demoting-many-sections">
<h3><a class="toc-backref" href="#id8">Promoting and Demoting Many Sections</a><a class="headerlink" href="#promoting-and-demoting-many-sections" title="Permalink to this headline">¶</a></h3>
<p>When you are re-organizing the structure of a document, it can be
useful to change the level of a number of section titles.  The same
key binding can be used to do that: if the region is active when the
binding is invoked, all the section titles that are within the region
are promoted accordingly (or demoted, with negative prefix arg).</p>
</div>
<div class="section" id="redoing-all-the-decorations-to-your-taste">
<h3><a class="toc-backref" href="#id9">Redoing All the Decorations to Your Taste</a><a class="headerlink" href="#redoing-all-the-decorations-to-your-taste" title="Permalink to this headline">¶</a></h3>
<p>If you open someone else&#8217;s file and the decorations it contains are
unfamiliar, you may want to readjust them to fit your own preferred
hierarchy of decorations. This can be difficult to perform by hand.
However, you can do this easily by invoking
<tt class="docutils literal"><span class="pre">rst-straighten-decorations</span></tt> (<tt class="docutils literal"><span class="pre">C-c</span> <span class="pre">C-s</span></tt>), which operates on the
entire buffer.</p>
</div>
<div class="section" id="customizations-for-decorations">
<h3><a class="toc-backref" href="#id10">Customizations for Decorations</a><a class="headerlink" href="#customizations-for-decorations" title="Permalink to this headline">¶</a></h3>
<p>You can set the variable <tt class="docutils literal"><span class="pre">rst-preferred-decorations</span></tt> to a list of
the decorations that you like to use for documents.  Everyone has
their preference.  <tt class="docutils literal"><span class="pre">rst-default-indent</span></tt> can be set to the number of
indent spaces preferred for the over-and-under decoration style.</p>
</div>
<div class="section" id="viewing-the-hierarchy-of-section-decorations">
<h3><a class="toc-backref" href="#id11">Viewing the Hierarchy of Section Decorations</a><a class="headerlink" href="#viewing-the-hierarchy-of-section-decorations" title="Permalink to this headline">¶</a></h3>
<p>You can visualize the hierarchy of the section decorations in the
current buffer by invoking <tt class="docutils literal"><span class="pre">rst-display-decorations-hierarchy</span></tt>,
bound on <tt class="docutils literal"><span class="pre">C-c</span> <span class="pre">C-h</span></tt>.  A temporary buffer will appear with fake
section titles rendered in the style of the current document.  This
can be useful when editing other people&#8217;s documents to find out which
section decorations correspond to which levels.</p>
</div>
</div>
<div class="section" id="section-movement-and-selection">
<h2><a class="toc-backref" href="#id12">Section Movement and Selection</a><a class="headerlink" href="#section-movement-and-selection" title="Permalink to this headline">¶</a></h2>
<p>You can move the cursor between the different section titles by using
the <tt class="docutils literal"><span class="pre">rst-backward-section</span></tt> and <tt class="docutils literal"><span class="pre">rst-forward-section</span></tt> functions, by
default bound to the <tt class="docutils literal"><span class="pre">C-c</span> <span class="pre">C-p</span></tt> and <tt class="docutils literal"><span class="pre">C-c</span> <span class="pre">C-n</span></tt> keys.</p>
<p>To mark the section that cursor lies in, use <tt class="docutils literal"><span class="pre">rst-mark-section</span></tt>
(<tt class="docutils literal"><span class="pre">C-c</span> <span class="pre">C-m</span></tt>).</p>
</div>
<div class="section" id="operating-on-blocks-of-text">
<h2><a class="toc-backref" href="#id13">Operating on Blocks of Text</a><a class="headerlink" href="#operating-on-blocks-of-text" title="Permalink to this headline">¶</a></h2>
<div class="section" id="shifting-text-horizontally-intelligently">
<h3><a class="toc-backref" href="#id14">Shifting Text Horizontally Intelligently</a><a class="headerlink" href="#shifting-text-horizontally-intelligently" title="Permalink to this headline">¶</a></h3>
<p>Due to the nature of <a class="reference external" href="http://docutils.sf.net/rst.html">reStructuredText</a>, lists are indented by two or
three characters, e.g. bulleted lists use two chars:</p>
<div class="highlight-python"><pre>- Fruits

  - Bananas
  - Apples
  - Oranges

- Veggies

  - Zucchini
  - Chick Peas</pre>
</div>
<p>while enumerated lists are indented by 3 or more characters</p>
<div class="highlight-python"><pre>9. Apples

   Oranges are tasty.

10. Oranges

    Oranges are zesty.</pre>
</div>
<p>To this effect, when shifting text, it can be useful to have functions
which understand which indent to use by using the context around the
region. Those functions are <tt class="docutils literal"><span class="pre">rst-shift-region-right</span></tt> and
<tt class="docutils literal"><span class="pre">rst-shift-region-left</span></tt>.</p>
<p>You can use <tt class="docutils literal"><span class="pre">C-c</span> <span class="pre">C-r</span></tt> and <tt class="docutils literal"><span class="pre">C-c</span> <span class="pre">C-l</span></tt> to shift the active region.
These bindings are similar to the ones provided by python-mode for
editing python code and behave similarly.  They automatically inspect
the lines of text before the currently selected region to determine
what the appropriate column positions are.</p>
</div>
<div class="section" id="bulleting-and-enumerating-lists">
<h3><a class="toc-backref" href="#id15">Bulleting and Enumerating Lists</a><a class="headerlink" href="#bulleting-and-enumerating-lists" title="Permalink to this headline">¶</a></h3>
<p>Sometimes it can be useful to insert bullet list markers enumeration
number before a number of lines or paragraphs.  You can do this easily
by invoking <tt class="docutils literal"><span class="pre">rst-enumerate-region</span></tt> (<tt class="docutils literal"><span class="pre">C-c</span> <span class="pre">C-e</span></tt>), for example, the
following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Apples</span>

<span class="n">Oranges</span>

<span class="n">Bananas</span>
</pre></div>
</div>
<p>becomes:</p>
<div class="highlight-python"><pre>1. Apples

2. Oranges

3. Bananas</pre>
</div>
<p><tt class="docutils literal"><span class="pre">rst-listify-region</span></tt> (<tt class="docutils literal"><span class="pre">C-c</span> <span class="pre">C-b</span></tt>) does the same, but only adds
bullet list markers, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Apples</span>

<span class="n">Oranges</span>

<span class="n">Bananas</span>
</pre></div>
</div>
<p>becomes:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">-</span> <span class="n">Apples</span>

<span class="o">-</span> <span class="n">Oranges</span>

<span class="o">-</span> <span class="n">Bananas</span>
</pre></div>
</div>
<p>By default, each paragraph starting on the leftmost line in the
highlighted region will be taken to be a single list or enumeration
item, for example, enumerating the following:</p>
<div class="highlight-python"><pre>An apple a day
keeps the doctor away.

But oranges
are tastier than apples.

If you preferred bananas
you may be
a monkey.</pre>
</div>
<p>Will result in:</p>
<div class="highlight-python"><pre>1. An apple a day
   keeps the doctor away.

2. But oranges
   are tastier than apples.

3. If you preferred bananas
   you may be
   a monkey.</pre>
</div>
<p>If you would like to enumerate each of the lines, use a prefix
argument on the preceding commands, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Apples</span>
<span class="n">Oranges</span>
<span class="n">Bananas</span>
</pre></div>
</div>
<p>becomes:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">-</span> <span class="n">Apples</span>
<span class="o">-</span> <span class="n">Oranges</span>
<span class="o">-</span> <span class="n">Bananas</span>
</pre></div>
</div>
<div class="section" id="straightening-existing-bullet-list-hierarchies">
<h4><a class="toc-backref" href="#id16">Straightening Existing Bullet List Hierarchies</a><a class="headerlink" href="#straightening-existing-bullet-list-hierarchies" title="Permalink to this headline">¶</a></h4>
<p>If you invoke <tt class="docutils literal"><span class="pre">rst-straighten-bullets-region</span></tt> (C-c C-w), the
existing bullets in the highlighted region will be replaced to reflect
their respective level.  This does not make a difference in the
document structure that <a class="reference external" href="http://docutils.sf.net/rst.html">reStructuredText</a> defines, but looks better in
the input file, for example, if all of the top-level bullet items use
the character <tt class="docutils literal"><span class="pre">-</span></tt>, and all of the 2nd level items use <tt class="docutils literal"><span class="pre">*</span></tt>, etc.</p>
</div>
</div>
<div class="section" id="creating-and-removing-line-blocks">
<h3><a class="toc-backref" href="#id17">Creating and Removing Line Blocks</a><a class="headerlink" href="#creating-and-removing-line-blocks" title="Permalink to this headline">¶</a></h3>
<p>To create line blocks, first select the region to convert and invoke
<tt class="docutils literal"><span class="pre">rst-toggle-line-block</span></tt> with <tt class="docutils literal"><span class="pre">C-c</span> <span class="pre">C-d</span></tt>, for example, the
following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Apples</span>
<span class="n">Oranges</span>
<span class="n">Bananas</span>
</pre></div>
</div>
<p>becomes:</p>
<div class="highlight-python"><pre>| Apples
| Oranges
| Bananas</pre>
</div>
<p>This works even if the region is indented.  To remove line blocks,
select a region and invoke with a prefix argument.</p>
</div>
<div class="section" id="commenting-a-region-of-text">
<h3><a class="toc-backref" href="#id18">Commenting a Region of Text</a><a class="headerlink" href="#commenting-a-region-of-text" title="Permalink to this headline">¶</a></h3>
<p>If you use the Emacs <tt class="docutils literal"><span class="pre">comment-region</span></tt> function (bound to <tt class="docutils literal"><span class="pre">C-c</span>
<span class="pre">C-c</span></tt>), the appropriate comment syntax will be added to the active
block of text:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Apples</span>
<span class="n">Oranges</span>
<span class="n">Bananas</span>
</pre></div>
</div>
<p>becomes:</p>
<div class="highlight-python"><pre>.. Apples
.. Oranges
.. Bananas</pre>
</div>
</div>
</div>
<div class="section" id="converting-documents-from-emacs">
<h2><a class="toc-backref" href="#id19">Converting Documents from Emacs</a><a class="headerlink" href="#converting-documents-from-emacs" title="Permalink to this headline">¶</a></h2>
<p>The major mode provides a number of functions for running documents
being edited through the docutils tools.</p>
<p>The main generic function is <tt class="docutils literal"><span class="pre">rst-compile</span></tt> (<tt class="docutils literal"><span class="pre">C-c</span> <span class="pre">1</span></tt>). This
function basically creates a compilation command with the correct
output name for the current buffer and then invokes Emacs&#8217; compile
function.  It also looks for the presence of a <tt class="docutils literal"><span class="pre">docutils.conf</span></tt>
configuration file in the parent directories and adds it to the
cmdline options. There is also an alternative function in case you
often need run your document in a second toolset (<tt class="docutils literal"><span class="pre">C-c</span> <span class="pre">2</span></tt>).</p>
<p>You can customize the commands being used by setting
<tt class="docutils literal"><span class="pre">rst-compile-primary-toolset</span></tt> and <tt class="docutils literal"><span class="pre">rst-compile-secondary-toolset</span></tt>.</p>
<p>Other commands are available for other formats:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">rst-compile-pseudo-region</span></tt> (<tt class="docutils literal"><span class="pre">C-c</span> <span class="pre">3</span></tt>): When crafting documents,
it is often convenient to view which data structures docutils will
parse them into. You can use to run the active region through
<tt class="docutils literal"><span class="pre">rst2pseudoxml.py</span></tt> and have the output automatically be displayed
in a new buffer.</li>
<li><tt class="docutils literal"><span class="pre">rst-compile-pdf-preview</span></tt> (<tt class="docutils literal"><span class="pre">C-c</span> <span class="pre">4</span></tt>): Convert the current
document to PDF and launch a viewer on the results.</li>
<li><tt class="docutils literal"><span class="pre">rst-compile-slides-preview</span></tt> (<tt class="docutils literal"><span class="pre">C-c</span> <span class="pre">5</span></tt>): Convert the current
document to S5 slides and view in a web browser.</li>
</ul>
</div>
<div class="section" id="table-of-contents-features">
<h2><a class="toc-backref" href="#id20">Table-of-Contents Features</a><a class="headerlink" href="#table-of-contents-features" title="Permalink to this headline">¶</a></h2>
<p>When you are editing long documents, it can be a bit difficult to
orient yourself in the structure of your text.  To that effect, a
function is provided that quickly parses the document and presents a
hierarchically indented table of contents of the document in a
temporary buffer, in which you can navigate and press <tt class="docutils literal"><span class="pre">Return</span></tt> to go
to a specific section.</p>
<p>Invoke this function (<tt class="docutils literal"><span class="pre">rst-toc</span></tt>) with <tt class="docutils literal"><span class="pre">C-c</span> <span class="pre">C-t</span></tt>.  It should
present a temporary buffer that looks something like this:</p>
<div class="highlight-python"><pre>Table of Contents:
Debugging Meta-Techniques
  Introduction
  Debugging Solution Patterns
    Recognize That a Bug Exists
    Subdivide and Isolate
    Identify and Verify Assumptions
    Use a Tool for Introspection
    Change one thing at a time
    Learn about the System
  Understanding a bug
  The Basic Steps in Debugging
  Attitude
    Bad Feelings
    Good Feelings
  References</pre>
</div>
<p>When you select a section title (press <tt class="docutils literal"><span class="pre">RET</span></tt>), the temporary buffer
disappears and you are left with the cursor positioned at the chosen
section.</p>
<div class="section" id="inserting-a-table-of-contents">
<h3><a class="toc-backref" href="#id21">Inserting a Table of Contents</a><a class="headerlink" href="#inserting-a-table-of-contents" title="Permalink to this headline">¶</a></h3>
<p>Oftentimes in long text documents that are meant to be read directly,
a Table of Contents is inserted at the beginning of the text.  This is
the case for most internet FAQs, for example.  In <a class="reference external" href="http://docutils.sf.net/rst.html">reStructuredText</a>
documents, since the table of contents is automatically generated by
the parser with the <tt class="docutils literal"><span class="pre">..</span> <span class="pre">contents::</span></tt> directive, people generally have
not been adding a text table of contents to their source documents,
and partly because it is too much trouble to edit and maintain.</p>
<p>The emacs support for <a class="reference external" href="http://docutils.sf.net/rst.html">reStructuredText</a> provides a function to insert
such a table of contents in your document.  Since it is not meant to
be part of the document text, you should place such a table of
contents within a comment, so that it is ignored by the parser.  This
is the favoured usage:</p>
<div class="highlight-python"><pre>.. contents::
..
    1  Introduction
    2  Debugging Solution Patterns
      2.1  Recognize That a Bug Exists
      2.2  Subdivide and Isolate
      2.3  Identify and Verify Assumptions
      2.4  Use a Tool for Introspection
      2.5  Change one thing at a time
      2.6  Learn about the System
    3  Understanding a bug
    4  The Basic Steps in Debugging
    5  Attitude
      5.1  Bad Feelings
      5.2  Good Feelings
    6  References</pre>
</div>
<p>Just place the cursor at the top-left corner where you want to insert
the TOC and invoke the function with <tt class="docutils literal"><span class="pre">C-c</span> <span class="pre">C-i</span></tt>.  The table of
contents will display all the section titles that are under the
location where the insertion occurs.  This way you can insert local
table of contents by placing them in the appropriate location.</p>
<p>If you have deep nesting of sections, you can use a numeric prefix
argument to limit the depth of rendering of the TOC.</p>
<p>You can also customize the look of the TOC by setting the values of
the following variables:: <tt class="docutils literal"><span class="pre">rst-toc-indent</span></tt>,
<tt class="docutils literal"><span class="pre">rst-toc-insert-style</span></tt>, <tt class="docutils literal"><span class="pre">rst-toc-insert-max-level</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The table-of-contents inserted by <tt class="docutils literal"><span class="pre">rst-mode</span></tt> has text properties
added to it so that if you type <tt class="docutils literal"><span class="pre">C-c</span> <span class="pre">C-f</span></tt> while the cursor is on
one of its entries, the cursor will jump to the corresponding
section in the document.</p>
</div>
</div>
<div class="section" id="maintaining-the-table-of-contents-up-to-date">
<h3><a class="toc-backref" href="#id22">Maintaining the Table of Contents Up-to-date</a><a class="headerlink" href="#maintaining-the-table-of-contents-up-to-date" title="Permalink to this headline">¶</a></h3>
<p>One issue is that you will probably want to maintain the inserted
table of contents up-to-date.  There is a function that will
automatically look for the inserted TOC (<tt class="docutils literal"><span class="pre">rst-toc-update</span></tt>)
and it can be added to a hook on the section decoration adjustment
function, so that every time you adjust a section title, the TOC is
updated. Add this functionality with the following emacs
configuration:</p>
<div class="highlight-python"><pre>(add-hook 'rst-adjust-hook 'rst-toc-update)</pre>
</div>
<p>You can invoke the update on the current buffer with <tt class="docutils literal"><span class="pre">C-c</span> <span class="pre">C-u</span></tt>.</p>
</div>
</div>
<div class="section" id="syntax-highlighting-via-font-lock">
<h2><a class="toc-backref" href="#id23">Syntax Highlighting via Font-Lock</a><a class="headerlink" href="#syntax-highlighting-via-font-lock" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">rst-mode</span></tt> also provides syntax highlighting to <a class="reference external" href="http://docutils.sf.net/rst.html">reStructuredText</a>
constructs. (This mode was written by Stefan Merten.)</p>
<p>Lazy syntax coloring is implemented for many of the constructs that
<a class="reference external" href="http://docutils.sf.net/rst.html">reStructuredText</a> prescribes. By default, the font-lock colouring is
performed lazily. If you don&#8217;t like this, you can turn this off by
setting the value of <tt class="docutils literal"><span class="pre">rst-mode-lazy</span></tt>. You can also change the
various colours (see the source file for the whole list of
customizable faces).</p>
<p><tt class="docutils literal"><span class="pre">font-lock</span></tt> syntax highlighting is enabled by default. If you prefer
to turn off syntax highlighting (on some machines it can slow down
editing a little bit), you can use the following in your Emacs
configuration:</p>
<div class="highlight-python"><pre>(setq font-lock-global-modes '(not rst-mode))</pre>
</div>
<div class="section" id="face-customization">
<h3><a class="toc-backref" href="#id24">Face Customization</a><a class="headerlink" href="#face-customization" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">rst-faces</span></tt> group contains all necessary for customizing
fonts. The default settings use standard <tt class="docutils literal"><span class="pre">font-lock-*-face</span></tt> so if
you set these to your liking they are probably good in rst-mode also.</p>
<p>The group is contained in the faces group as well as in the rst group.</p>
<div class="section" id="default-fonts">
<h4><a class="toc-backref" href="#id25">Default Fonts</a><a class="headerlink" href="#default-fonts" title="Permalink to this headline">¶</a></h4>
<p>The <tt class="docutils literal"><span class="pre">rst-faces-defaults</span></tt> group contains all necessary for
customizing the default fonts used for section title faces.</p>
<p>The general idea for section title faces is to have a non-default
background but do not change the background. The section level is
shown by the lightness of the background color. If you like this
general idea of generating faces for section titles but do not like
the details this group is the point where you can customize the
details. If you do not like the general idea, however, you should
customize the faces used in <tt class="docutils literal"><span class="pre">rst-adornment-faces-alist</span></tt>.</p>
<p>Note: If you are using a dark background please make sure the variable
<tt class="docutils literal"><span class="pre">frame-background-mode</span></tt> is set to the symbol dark. This triggers
some default values which are probably right for you.</p>
<p>The group is contained in the <tt class="docutils literal"><span class="pre">rst-faces</span></tt> group.</p>
<p>All customizable features have a comment explaining their
meaning. Refer to the customization of your Emacs (try <tt class="docutils literal"><span class="pre">M-x</span>
<span class="pre">customize</span></tt>).</p>
</div>
</div>
</div>
<div class="section" id="other-useful-settings">
<h2><a class="toc-backref" href="#id26">Other Useful Settings</a><a class="headerlink" href="#other-useful-settings" title="Permalink to this headline">¶</a></h2>
<p>This section covers general emacs text-mode settings that are useful
in the context of <a class="reference external" href="http://docutils.sf.net/rst.html">reStructuredText</a> conventions.  These are not
provided by <tt class="docutils literal"><span class="pre">rst.el</span></tt> but you may find them useful specifically for
<a class="reference external" href="http://docutils.sf.net/rst.html">reStructuredText</a> documents.</p>
<div class="section" id="text-mode-settings">
<h3><a class="toc-backref" href="#id27"><tt class="docutils literal"><span class="pre">text-mode</span></tt> Settings</a><a class="headerlink" href="#text-mode-settings" title="Permalink to this headline">¶</a></h3>
<p>Consult the Emacs manual for more text-mode customizations.  In
particular, you may be interested in setting the following variables,
functions and modes that pertain somewhat to text-mode:</p>
<ul class="simple">
<li>indent-tabs-mode</li>
<li>colon-double-space</li>
<li>auto-fill-mode</li>
<li>auto-mode-alist</li>
<li>fill-region</li>
</ul>
</div>
<div class="section" id="editing-tables-emacs-table-mode">
<h3><a class="toc-backref" href="#id28">Editing Tables: Emacs table mode</a><a class="headerlink" href="#editing-tables-emacs-table-mode" title="Permalink to this headline">¶</a></h3>
<p>You may want to check out <a class="reference external" href="http://table.sourceforge.net/">Emacs table mode</a> to create an edit
tables, it allows creating ascii tables compatible with
<a class="reference external" href="http://docutils.sf.net/rst.html">reStructuredText</a>.</p>
</div>
<div class="section" id="character-processing">
<h3><a class="toc-backref" href="#id29">Character Processing</a><a class="headerlink" href="#character-processing" title="Permalink to this headline">¶</a></h3>
<p>Since reStructuredText punts on the issue of character processing,
here are some useful resources for Emacs users in the Unicode world:</p>
<ul>
<li><p class="first"><a class="reference external" href="http://nwalsh.com/emacs/xmlchars/index.html">xmlunicode.el and unichars.el from Norman Walsh</a></p>
</li>
<li><p class="first"><a class="reference external" href="http://www.tbray.org/ongoing/When/200x/2003/09/27/UniEmacs">An essay by Tim Bray, with example code</a></p>
</li>
<li><p class="first">For Emacs users on Mac OS X, here are some useful useful additions
to your .emacs file.</p>
<ul>
<li><p class="first">To get direct keyboard input of non-ASCII characters (like
&#8220;option-e e&#8221; resulting in &#8220;é&#8221; [eacute]), first enable the option
key by setting the command key as your meta key:</p>
<div class="highlight-python"><pre>(setq mac-command-key-is-meta t) ;; nil for option key</pre>
</div>
<p>Next, use one of these lines:</p>
<div class="highlight-python"><pre>(set-keyboard-coding-system 'mac-roman)
(setq mac-keyboard-text-encoding kTextEncodingISOLatin1)</pre>
</div>
<p>I prefer the first line, because it enables non-Latin-1 characters
as well (em-dash, curly quotes, etc.).</p>
</li>
<li><p class="first">To enable the display of all characters in the Mac-Roman charset,
first create a fontset listing the fonts to use for each range of
characters using charsets that Emacs understands:</p>
<div class="highlight-python"><pre>(create-fontset-from-fontset-spec
 "-apple-monaco-medium-r-normal--10-*-*-*-*-*-fontset-monaco,
  ascii:-apple-monaco-medium-r-normal--10-100-75-75-m-100-mac-roman,
  latin-iso8859-1:-apple-monaco-medium-r-normal--10-100-75-75-m-100-mac-roman,
  mule-unicode-0100-24ff:-apple-monaco-medium-r-normal--10-100-75-75-m-100-mac-roman")</pre>
</div>
<p>Latin-1 doesn&#8217;t cover characters like em-dash and curly quotes, so
&#8220;mule-unicode-0100-24ff&#8221; is needed.</p>
<p>Next, use that fontset:</p>
<div class="highlight-python"><pre>(set-frame-font "fontset-monaco")</pre>
</div>
</li>
<li><p class="first">To enable cooperation between the system clipboard and the Emacs
kill ring, add this line:</p>
<div class="highlight-python"><pre>(set-clipboard-coding-system 'mac-roman)</pre>
</div>
</li>
</ul>
<p>Other useful resources are in <a class="reference external" href="http://members.shaw.ca/akochoi-emacs/stories/faq.html">Andrew Choi&#8217;s Emacs 21 for Mac OS X
FAQ</a>.</p>
</li>
</ul>
<p>No matter what platform (or editor) you&#8217;re using, I recommend the
<a class="reference external" href="http://www.tobias-jung.de/seekingprofont/">ProFont</a> programmer&#8217;s font.  It&#8217;s monospaced, small but readable,
similar characters are visually distinctive (like &#8220;I1l|&#8221;, &#8220;0O&#8221;, &#8220;ao&#8221;,
and &#8221;.,:;&#8221;), and free.</p>
</div>
</div>
<div class="section" id="credits">
<h2><a class="toc-backref" href="#id30">Credits</a><a class="headerlink" href="#credits" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The automatic section adjustment and table of contents features were
written by Martin Blais;</li>
<li>Syntax highlighting was implemented by Stefan Merten;</li>
<li>Various other functions were implemented by David Goodger.</li>
</ul>
<div class="section" id="obsolete-files">
<h3><a class="toc-backref" href="#id31">Obsolete Files</a><a class="headerlink" href="#obsolete-files" title="Permalink to this headline">¶</a></h3>
<p>On 2005-10-30, <tt class="docutils literal"><span class="pre">rst.el</span></tt> integrated and replaced the contents of the
following files:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">restructuredtext.el</span></tt></li>
<li><tt class="docutils literal"><span class="pre">rst-html.el</span></tt></li>
<li><tt class="docutils literal"><span class="pre">rst-mode.el</span></tt></li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Emacs Support for reStructuredText</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#section-decorations">Section Decorations</a><ul>
<li><a class="reference internal" href="#adjusting-a-section-title">Adjusting a Section Title</a></li>
<li><a class="reference internal" href="#promoting-and-demoting-many-sections">Promoting and Demoting Many Sections</a></li>
<li><a class="reference internal" href="#redoing-all-the-decorations-to-your-taste">Redoing All the Decorations to Your Taste</a></li>
<li><a class="reference internal" href="#customizations-for-decorations">Customizations for Decorations</a></li>
<li><a class="reference internal" href="#viewing-the-hierarchy-of-section-decorations">Viewing the Hierarchy of Section Decorations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#section-movement-and-selection">Section Movement and Selection</a></li>
<li><a class="reference internal" href="#operating-on-blocks-of-text">Operating on Blocks of Text</a><ul>
<li><a class="reference internal" href="#shifting-text-horizontally-intelligently">Shifting Text Horizontally Intelligently</a></li>
<li><a class="reference internal" href="#bulleting-and-enumerating-lists">Bulleting and Enumerating Lists</a><ul>
<li><a class="reference internal" href="#straightening-existing-bullet-list-hierarchies">Straightening Existing Bullet List Hierarchies</a></li>
</ul>
</li>
<li><a class="reference internal" href="#creating-and-removing-line-blocks">Creating and Removing Line Blocks</a></li>
<li><a class="reference internal" href="#commenting-a-region-of-text">Commenting a Region of Text</a></li>
</ul>
</li>
<li><a class="reference internal" href="#converting-documents-from-emacs">Converting Documents from Emacs</a></li>
<li><a class="reference internal" href="#table-of-contents-features">Table-of-Contents Features</a><ul>
<li><a class="reference internal" href="#inserting-a-table-of-contents">Inserting a Table of Contents</a></li>
<li><a class="reference internal" href="#maintaining-the-table-of-contents-up-to-date">Maintaining the Table of Contents Up-to-date</a></li>
</ul>
</li>
<li><a class="reference internal" href="#syntax-highlighting-via-font-lock">Syntax Highlighting via Font-Lock</a><ul>
<li><a class="reference internal" href="#face-customization">Face Customization</a><ul>
<li><a class="reference internal" href="#default-fonts">Default Fonts</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#other-useful-settings">Other Useful Settings</a><ul>
<li><a class="reference internal" href="#text-mode-settings"><tt class="docutils literal"><span class="pre">text-mode</span></tt> Settings</a></li>
<li><a class="reference internal" href="#editing-tables-emacs-table-mode">Editing Tables: Emacs table mode</a></li>
<li><a class="reference internal" href="#character-processing">Character Processing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#credits">Credits</a><ul>
<li><a class="reference internal" href="#obsolete-files">Obsolete Files</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/docs/user/emacs.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li><a href="../../index.html">klb3713&#39;s notebook</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, klb3713.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>